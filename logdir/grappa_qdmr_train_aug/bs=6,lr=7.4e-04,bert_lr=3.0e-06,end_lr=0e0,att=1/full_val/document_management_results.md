 | Idx | Table      | Column | Primary Key | Foreign Key | 
 | ----------- | ----------- | ----------- | ----------- | ----------- | 
  | 0 |  | * |   |   | 
 | 1 | **Roles** | role_code | + |   | 
 | 2 |   | role_description |   |   | 
 | 3 | **Users** | user_id | + |   | 
 | 4 |   | role_code |   | --> 1 | 
 | 5 |   | user_name |   |   | 
 | 6 |   | user_login |   |   | 
 | 7 |   | password |   |   | 
 | 8 | **Document_Structures** | document_structure_code | + |   | 
 | 9 |   | parent_document_structure_code |   |   | 
 | 10 |   | document_structure_description |   |   | 
 | 11 | **Functional_Areas** | functional_area_code | + |   | 
 | 12 |   | parent_functional_area_code |   |   | 
 | 13 |   | functional_area_description |   |   | 
 | 14 | **Images** | image_id | + |   | 
 | 15 |   | image_alt_text |   |   | 
 | 16 |   | image_name |   |   | 
 | 17 |   | image_url |   |   | 
 | 18 | **Documents** | document_code | + |   | 
 | 19 |   | document_structure_code |   | --> 8 | 
 | 20 |   | document_type_code |   |   | 
 | 21 |   | access_count |   |   | 
 | 22 |   | document_name |   |   | 
 | 23 | **Document_Functional_Areas** | document_code |   | --> 18 | 
 | 24 |   | functional_area_code |   | --> 11 | 
 | 25 | **Document_Sections** | section_id | + |   | 
 | 26 |   | document_code |   | --> 18 | 
 | 27 |   | section_sequence |   |   | 
 | 28 |   | section_code |   |   | 
 | 29 |   | section_title |   |   | 
 | 30 | **Document_Sections_Images** | section_id | + | --> 25 | 
 | 31 |   | image_id |   | --> 14 | 
 
  | Index | Question  | SQL | gold QDMR | pred QDMR | Exec | SQL hardness |
  | ----------- | ----------- | ----------- |  ----------- | ----------- | ----------- | ----------- | 
 | SPIDER_train_4499 | Find the name and access counts of all documents, in alphabetic order of the document name. | SELECT document_name ,  access_count FROM documents ORDER BY document_name | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​document_name, #1] <br>3. PROJECT[col:​Documents:​access_count, #1] <br>4. UNION[#2, #3] <br>5. SORT[#4, #2, sortdir:​ascending] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​document_name, #1] <br>3. PROJECT[col:​Documents:​access_count, #1] <br>4. UNION[#2, #3] <br>5. SORT[#4, #2, sortdir:​ascending] <br> | + | medium | 
  | SPIDER_train_4501 | Find the name of the document that has been accessed the greatest number of times, as well as the count of how many times it has been accessed? | SELECT document_name ,  access_count FROM documents ORDER BY access_count DESC LIMIT 1 | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​access_count, #1] <br>3. GROUP[col:​Documents:​access_count, #2, #1] <br>4. AGGREGATE[max, #3] <br>5. COMPARATIVE[#1, #3, comparative:​=:​#4] <br>6. PROJECT[col:​Documents:​document_name, #5] <br>7. UNION[#6, #4] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​access_count, #1] <br>3. GROUP[sum, #2, #1] <br>4. AGGREGATE[max, #3] <br>5. COMPARATIVE[#1, #3, comparative:​=:​amelie53:​col:​Users:​user_name] <br>6. PROJECT[col:​Documents:​document_name, #4] <br>7. PROJECT[col:​Documents:​access_count, #4] <br>8. GROUP[count, #7, #4] <br>9. UNION[#5, #8] <br> | - | medium | 
  | SPIDER_train_4503 | Find the types of documents with more than 4 documents. | SELECT document_type_code FROM documents GROUP BY document_type_code HAVING count(*)  >  4 | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>:​4] <br> | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>:​4] <br> | + | easy | 
  | SPIDER_train_4505 | Find the total access count of all documents in the most popular document type. | SELECT sum(access_count) FROM documents GROUP BY document_type_code ORDER BY count(*) DESC LIMIT 1 | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​document_type_code, #1] <br>3. GROUP[count, #1, #2] <br>4. COMPARATIVE[#2, #3, comparative:​max:​None] <br>5. COMPARATIVE[#1, #2, comparative:​=:​#4] <br>6. PROJECT[col:​Documents:​access_count, #5] <br>7. AGGREGATE[sum, #6] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​document_type_code, #1] <br>3. GROUP[count, #1, #2] <br>4. SUPERLATIVE[comparative:​max:​None, #2, #3] <br>5. COMPARATIVE[#1, #1, comparative:​=:​#3] <br>6. PROJECT[col:​Documents:​access_count, #4] <br>7. AGGREGATE[sum, #6] <br> | + | hard | 
  | SPIDER_train_4506 | What is the total access count of documents that are of the most common document type? | SELECT sum(access_count) FROM documents GROUP BY document_type_code ORDER BY count(*) DESC LIMIT 1 | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[tbl:​Documents, #4] <br>6. PROJECT[col:​Documents:​access_count, #5] <br>7. AGGREGATE[sum, #6] <br> | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[tbl:​Documents, #4] <br>6. PROJECT[col:​Documents:​access_count, #5] <br>7. AGGREGATE[sum, #6] <br> | + | hard | 
  | SPIDER_train_4507 | What is the average access count of documents? | SELECT avg(access_count) FROM documents | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​access_count, #1] <br>3. AGGREGATE[avg, #2] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​access_count, #1] <br>3. AGGREGATE[avg, #2] <br> | + | easy | 
  | SPIDER_train_4508 | Find the average access count across all documents? | SELECT avg(access_count) FROM documents | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​access_count, #1] <br>3. AGGREGATE[avg, #2] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​access_count, #1] <br>3. AGGREGATE[avg, #2] <br> | + | easy | 
  | SPIDER_train_4511 | What is the type of the document named "David CV"? | SELECT document_type_code FROM documents WHERE document_name  =  "David CV" | 1. SELECT[tbl:​Documents] <br>2. FILTER[#1, comparative:​=:​David CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Documents:​document_type_code, #2] <br> | 1. SELECT[tbl:​Documents] <br>2. COMPARATIVE[#1, #1, comparative:​=:​David CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Documents:​document_type_code, #2] <br> | + | easy | 
  | SPIDER_train_4512 | Return the type code of the document named "David CV". | SELECT document_type_code FROM documents WHERE document_name  =  "David CV" | 1. SELECT[tbl:​Documents] <br>2. FILTER[#1, comparative:​=:​David CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Documents:​document_type_code, #2] <br> | 1. SELECT[tbl:​Documents] <br>2. COMPARATIVE[#1, #1, comparative:​=:​David CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Documents:​document_type_code, #2] <br> | + | easy | 
  | SPIDER_train_4517 | What are all the section titles of the document named "David CV"? | SELECT t2.section_title FROM documents AS t1 JOIN document_sections AS t2 ON t1.document_code  =  t2.document_code WHERE t1.document_name  =  "David CV" | 1. SELECT[tbl:​Document_Sections] <br>2. FILTER[#1, comparative:​=:​David CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Document_Sections:​section_title, #2] <br> | 1. SELECT[tbl:​Document_Sections] <br>2. COMPARATIVE[#1, #1, comparative:​=:​David CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Document_Sections:​section_title, #2] <br> | + | medium | 
  | SPIDER_train_4518 | Give the section titles of the document with the name "David CV". | SELECT t2.section_title FROM documents AS t1 JOIN document_sections AS t2 ON t1.document_code  =  t2.document_code WHERE t1.document_name  =  "David CV" | 1. SELECT[tbl:​Document_Sections] <br>2. PROJECT[col:​Documents:​document_name, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​David CV:​col:​Documents:​document_name] <br>4. PROJECT[tbl:​Document_Sections, #3] <br>5. PROJECT[col:​Document_Sections:​section_title, #4] <br> | 1. SELECT[tbl:​Document_Sections] <br>2. PROJECT[col:​Documents:​document_name, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​David CV:​col:​Documents:​document_name] <br>4. PROJECT[tbl:​Document_Sections, #3] <br>5. PROJECT[col:​Document_Sections:​section_title, #4] <br> | + | medium | 
  | SPIDER_train_4520 | What are the names of documents that do not have any sections? | SELECT document_name FROM documents WHERE document_code NOT IN (SELECT document_code FROM document_sections) | 1. SELECT[tbl:​Documents] <br>2. FILTER[#1, tbl:​Document_Sections] <br>3. DISCARD[#1, #2] <br>4. PROJECT[col:​Documents:​document_name, #3] <br> | 1. SELECT[tbl:​Documents] <br>2. COMPARATIVE[#1, #1, tbl:​Document_Sections] <br>3. DISCARD[#1, #2] <br>4. PROJECT[col:​Documents:​document_name, #3] <br> | + | hard | 
  | SPIDER_train_4523 | Find the average access counts of documents with functional area "Acknowledgement". | SELECT avg(t1.access_count) FROM documents AS t1 JOIN document_functional_areas AS t2 ON t1.document_code  =  t2.document_code JOIN functional_areas AS t3 ON t2.functional_area_code  =  t3.functional_area_code WHERE t3.functional_area_description  =  "Acknowledgement" | 1. SELECT[tbl:​Document_Functional_Areas] <br>2. PROJECT[tbl:​Functional_Areas, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​Acknowledgement:​col:​Functional_Areas:​functional_area_description] <br>4. PROJECT[col:​Documents:​access_count, #3] <br>5. AGGREGATE[avg, #4] <br> | 1. SELECT[tbl:​Document_Functional_Areas] <br>2. PROJECT[tbl:​Functional_Areas, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​Acknowledgement:​col:​Functional_Areas:​functional_area_description] <br>4. PROJECT[col:​Documents:​access_count, #3] <br>5. AGGREGATE[avg, #4] <br> | + | hard | 
  | SPIDER_train_4524 | What are the average access counts of documents that have the functional area description "Acknowledgement"? | SELECT avg(t1.access_count) FROM documents AS t1 JOIN document_functional_areas AS t2 ON t1.document_code  =  t2.document_code JOIN functional_areas AS t3 ON t2.functional_area_code  =  t3.functional_area_code WHERE t3.functional_area_description  =  "Acknowledgement" | 1. SELECT[tbl:​Document_Functional_Areas] <br>2. PROJECT[tbl:​Functional_Areas, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​Acknowledgement:​col:​Functional_Areas:​functional_area_description] <br>4. PROJECT[col:​Documents:​access_count, #3] <br>5. AGGREGATE[avg, #4] <br> | 1. SELECT[tbl:​Document_Functional_Areas] <br>2. PROJECT[tbl:​Functional_Areas, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​Acknowledgement:​col:​Functional_Areas:​functional_area_description] <br>4. PROJECT[col:​Documents:​access_count, #3] <br>5. AGGREGATE[avg, #4] <br> | + | hard | 
  | SPIDER_train_4527 | What is the name of the document with the most number of sections? | SELECT t1.document_name FROM documents AS t1 JOIN document_sections AS t2 ON t1.document_code  =  t2.document_code GROUP BY t1.document_code ORDER BY count(*) DESC LIMIT 1 | 1. SELECT[tbl:​Documents] <br>2. PROJECT[tbl:​Document_Sections, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Documents:​document_name, #4] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[tbl:​Document_Sections, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Documents:​document_name, #4] <br> | + | extra | 
  | SPIDER_train_4528 | Return the name of the document that has the most sections. | SELECT t1.document_name FROM documents AS t1 JOIN document_sections AS t2 ON t1.document_code  =  t2.document_code GROUP BY t1.document_code ORDER BY count(*) DESC LIMIT 1 | 1. SELECT[tbl:​Documents] <br>2. PROJECT[tbl:​Document_Sections, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Documents:​document_name, #4] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[tbl:​Document_Sections, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Documents:​document_name, #4] <br> | + | extra | 
  | SPIDER_train_4529 | List all the document names which contains "CV". | SELECT document_name FROM documents WHERE document_name LIKE "%CV%" | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​document_name, #1] <br>3. FILTER[#2, comparative:​like:​%CV%:​col:​Documents:​document_name] <br> | 1. SELECT[tbl:​Documents] <br>2. PROJECT[col:​Documents:​document_name, #1] <br>3. COMPARATIVE[#2, #2, comparative:​like:​CV:​col:​Documents:​document_name] <br> | + | medium | 
  | SPIDER_train_4530 | What are the names of documents that contain the substring "CV"? | SELECT document_name FROM documents WHERE document_name LIKE "%CV%" | 1. SELECT[tbl:​Documents] <br>2. FILTER[#1, comparative:​like:​%CV%:​col:​Documents:​document_name] <br>3. PROJECT[col:​Documents:​document_name, #2] <br> | 1. SELECT[tbl:​Documents] <br>2. COMPARATIVE[#1, #1, comparative:​like:​CV:​col:​Documents:​document_name] <br>3. PROJECT[col:​Documents:​document_name, #2] <br> | + | medium | 
  | SPIDER_train_4531 | How many users are logged in? | SELECT count(*) FROM users WHERE user_login  =  1 | 1. SELECT[tbl:​Users] <br>2. FILTER[#1, comparative:​=:​1:​col:​Users:​user_login] <br>3. AGGREGATE[count, #2] <br> | 1. SELECT[tbl:​Users] <br>2. COMPARATIVE[#1, #1, comparative:​=:​1:​col:​Users:​user_login] <br>3. AGGREGATE[count, #2] <br> | + | easy | 
  | SPIDER_train_4532 | Count the number of users that are logged in. | SELECT count(*) FROM users WHERE user_login  =  1 | 1. SELECT[tbl:​Users] <br>2. FILTER[#1, comparative:​=:​1:​col:​Users:​user_login] <br>3. AGGREGATE[count, #2] <br> | 1. SELECT[tbl:​Users] <br>2. COMPARATIVE[#1, #1, comparative:​=:​1:​col:​Users:​user_login] <br>3. AGGREGATE[count, #2] <br> | + | easy | 
  | SPIDER_train_4537 | List all the image name and URLs in the order of their names. | SELECT image_name ,  image_url FROM images ORDER BY image_name | 1. SELECT[col:​Images:​image_name] <br>2. PROJECT[col:​Images:​image_url, #1] <br>3. UNION[#1, #2] <br>4. SORT[#3, #1] <br> | 1. SELECT[col:​Images:​image_name] <br>2. PROJECT[col:​Images:​image_url, #1] <br>3. UNION[#1, #2] <br>4. SORT[#3, #1, sortdir:​ascending] <br> | + | medium | 
  | SPIDER_train_4541 | What document types have more than 2 corresponding documents? | SELECT document_type_code FROM documents GROUP BY document_type_code HAVING count(*)  >  2 | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>:​2] <br> | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>:​2] <br> | + | easy | 
  | SPIDER_train_4542 | Give the codes of document types that have more than 2 corresponding documents. | SELECT document_type_code FROM documents GROUP BY document_type_code HAVING count(*)  >  2 | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>:​2] <br>5. PROJECT[col:​Documents:​document_type_code, #4] <br> | 1. SELECT[col:​Documents:​document_type_code] <br>2. PROJECT[tbl:​Documents, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>:​2] <br>5. PROJECT[col:​Documents:​document_type_code, #4] <br> | + | easy | 
 ***
 Exec acc: **0.9565**
