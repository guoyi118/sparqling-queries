 | Idx | Table      | Column | Primary Key | Foreign Key | 
 | ----------- | ----------- | ----------- | ----------- | ----------- | 
  | 0 |  | * |   |   | 
 | 1 | **building** | building_id | + |   | 
 | 2 |   | Name |   |   | 
 | 3 |   | Street_address |   |   | 
 | 4 |   | Years_as_tallest |   |   | 
 | 5 |   | Height_feet |   |   | 
 | 6 |   | Floors |   |   | 
 | 7 | **Institution** | Institution_id | + |   | 
 | 8 |   | Institution |   |   | 
 | 9 |   | Location |   |   | 
 | 10 |   | Founded |   |   | 
 | 11 |   | Type |   |   | 
 | 12 |   | Enrollment |   |   | 
 | 13 |   | Team |   |   | 
 | 14 |   | Primary_Conference |   |   | 
 | 15 |   | building_id |   | --> 1 | 
 | 16 | **protein** | common_name | + |   | 
 | 17 |   | protein_name |   |   | 
 | 18 |   | divergence_from_human_lineage |   |   | 
 | 19 |   | accession_number |   |   | 
 | 20 |   | sequence_length |   |   | 
 | 21 |   | sequence_identity_to_human_protein |   |   | 
 | 22 |   | Institution_id |   | --> 7 | 
 
  | Index | Question  | SQL | gold QDMR | pred QDMR | Exec | SQL hardness |
  | ----------- | ----------- | ----------- |  ----------- | ----------- | ----------- | ----------- | 
 | SPIDER_train_1910 | How many buildings are there? | SELECT count(*) FROM building | 1. SELECT[tbl:​building] <br>2. AGGREGATE[count, #1] <br> | 1. SELECT[tbl:​building] <br>2. AGGREGATE[count, #1] <br> | + | easy | 
  | SPIDER_train_1911 | Show the name, street address, and number of floors for all buildings ordered by the number of floors. | SELECT name ,  street_address ,  floors FROM building ORDER BY floors | 1. SELECT[tbl:​building] <br>2. PROJECT[col:​building:​Name, #1] <br>3. PROJECT[col:​building:​Street_address, #1] <br>4. PROJECT[col:​building:​Floors, #1] <br>5. GROUP[col:​building:​Floors, #4, #1] <br>6. UNION[#2, #3, #5] <br>7. SORT[#6, #5] <br> | 1. SELECT[tbl:​building] <br>2. PROJECT[col:​building:​Name, #1] <br>3. PROJECT[col:​building:​Street_address, #1] <br>4. PROJECT[col:​building:​Floors, #1] <br>5. GROUP[sum, #4, #1] <br>6. UNION[#2, #3, #5] <br>7. SORT[#6, #5, sortdir:​ascending] <br> | + | medium | 
  | SPIDER_train_1913 | What are the average, maximum, and minimum number of floors for all buildings? | SELECT avg(floors) ,  max(floors) ,  min(floors) FROM building | 1. SELECT[tbl:​building] <br>2. PROJECT[col:​building:​Floors, #1] <br>3. AGGREGATE[col:​building:​Floors, #2] <br>4. AGGREGATE[avg, #3] <br>5. AGGREGATE[max, #3] <br>6. AGGREGATE[min, #3] <br>7. UNION[#4, #5, #6] <br> | 1. SELECT[tbl:​building] <br>2. PROJECT[col:​building:​Floors, #1] <br>3. AGGREGATE[sum, #2] <br>4. AGGREGATE[avg, #3] <br>5. AGGREGATE[max, #3] <br>6. AGGREGATE[min, #3] <br>7. UNION[#4, #5, #6] <br> | + | medium | 
  | SPIDER_train_1915 | List the names of buildings with at least 200 feet of height and with at least 20 floors. | SELECT name FROM building WHERE height_feet  >=  200 AND floors  >=  20 | 1. SELECT[tbl:​building] <br>2. PROJECT[col:​building:​Height_feet, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>=:​20:​col:​building:​Floors] <br>4. PROJECT[col:​building:​Floors, #1] <br>5. GROUP[col:​building:​Floors, #4, #1] <br>6. COMPARATIVE[#1, #5, comparative:​>=:​200:​col:​building:​Height_feet] <br>7. INTERSECTION[#1, #3, #6] <br>8. PROJECT[col:​building:​Name, #7] <br> | 1. SELECT[tbl:​building] <br>2. PROJECT[col:​building:​Height_feet, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>=:​20:​col:​building:​Floors] <br>4. PROJECT[col:​building:​Floors, #1] <br>5. GROUP[sum, #4, #1] <br>6. COMPARATIVE[#1, #5, comparative:​>=:​200:​col:​building:​Height_feet] <br>7. INTERSECTION[#1, #3, #6] <br>8. PROJECT[col:​building:​Name, #7] <br> | + | medium | 
  | SPIDER_train_1917 | Show institution types, along with the number of institutions and total enrollment for each type. | SELECT TYPE ,  count(*) ,  sum(enrollment) FROM institution GROUP BY TYPE | 1. SELECT[col:​Institution:​Type] <br>2. PROJECT[tbl:​Institution, #1] <br>3. GROUP[count, #2, #1] <br>4. PROJECT[col:​Institution:​Enrollment, #2] <br>5. GROUP[sum, #4, #1] <br>6. UNION[#1, #3, #5] <br> | 1. SELECT[col:​Institution:​Type] <br>2. PROJECT[tbl:​Institution, #1] <br>3. GROUP[count, #2, #1] <br>4. PROJECT[col:​Institution:​Enrollment, #2] <br>5. GROUP[sum, #4, #1] <br>6. UNION[#1, #3, #5] <br> | + | medium | 
  | SPIDER_train_1918 | Show the institution type with the largest number of institutions. | SELECT TYPE FROM institution GROUP BY TYPE ORDER BY count(*) DESC LIMIT 1 | 1. SELECT[tbl:​Institution] <br>2. PROJECT[col:​Institution:​Type, #1] <br>3. GROUP[count, #1, #2] <br>4. COMPARATIVE[#2, #3, comparative:​max:​None] <br> | 1. SELECT[tbl:​Institution] <br>2. PROJECT[col:​Institution:​Type, #1] <br>3. GROUP[count, #1, #2] <br>4. SUPERLATIVE[comparative:​max:​None, #2, #3] <br> | + | hard | 
  | SPIDER_train_1919 | Show the institution type with an institution founded after 1990 and an institution with at least 1000 enrollment. | SELECT TYPE FROM institution WHERE founded  >  1990 AND enrollment  >=  1000 | 1. SELECT[tbl:​Institution] <br>2. FILTER[#1, comparative:​>:​1990:​col:​Institution:​Founded] <br>3. FILTER[#2, comparative:​>=:​1000:​col:​Institution:​Enrollment] <br>4. PROJECT[col:​Institution:​Type, #3] <br> | 1. SELECT[tbl:​Institution] <br>2. COMPARATIVE[#1, #1, comparative:​>:​1990:​col:​Institution:​Founded] <br>3. COMPARATIVE[#2, #2, comparative:​>=:​1000:​col:​Institution:​Enrollment] <br>4. PROJECT[col:​Institution:​Type, #3] <br> | + | medium | 
  | SPIDER_train_1920 | Show the name of buildings that do not have any institution. | SELECT name FROM building WHERE building_id NOT IN (SELECT building_id FROM institution) | 1. SELECT[tbl:​building] <br>2. PROJECT[tbl:​Institution, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, is at least one] <br>5. DISCARD[#1, #4] <br>6. PROJECT[col:​building:​Name, #5] <br> | 1. SELECT[tbl:​building] <br>2. PROJECT[tbl:​Institution, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, None] <br>5. DISCARD[#1, #4] <br>6. PROJECT[col:​building:​Name, #5] <br> | + | hard | 
  | SPIDER_train_1922 | For each building, show the name of the building and the number of institutions in it. | SELECT T1.name ,  count(*) FROM building AS T1 JOIN institution AS T2 ON T1.building_id  =  T2.building_id GROUP BY T1.building_id | 1. SELECT[col:​building:​building_id] <br>2. PROJECT[col:​building:​Name, #1] <br>3. PROJECT[tbl:​Institution, #1] <br>4. GROUP[count, #3, #1] <br>5. UNION[#2, #4] <br> | 1. SELECT[col:​building:​building_id] <br>2. PROJECT[col:​building:​Name, #1] <br>3. PROJECT[tbl:​Institution, #1] <br>4. GROUP[count, #3, #1] <br>5. UNION[#2, #4] <br> | + | medium | 
  | SPIDER_train_1923 | Show the names and heights of buildings with at least two institutions founded after 1880. | SELECT T1.name ,  T1.height_feet FROM building AS T1 JOIN institution AS T2 ON T1.building_id  =  T2.building_id WHERE T2.founded  >  1880 GROUP BY T1.building_id HAVING count(*)  >=  2 | 1. SELECT[tbl:​building] <br>2. PROJECT[tbl:​Institution, #1] <br>3. FILTER[#2, comparative:​>:​1880:​col:​Institution:​Founded] <br>4. GROUP[count, #3, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>=:​2] <br>6. PROJECT[col:​building:​Name, #5] <br>7. PROJECT[col:​building:​Height_feet, #5] <br>8. UNION[#6, #7] <br> | 1. SELECT[tbl:​building] <br>2. PROJECT[tbl:​Institution, #1] <br>3. COMPARATIVE[#2, #2, comparative:​>:​1880:​col:​Institution:​Founded] <br>4. GROUP[count, #3, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>=:​2] <br>6. PROJECT[col:​building:​Name, #5] <br>7. PROJECT[col:​building:​Height_feet, #5] <br>8. UNION[#6, #7] <br> | + | hard | 
  | SPIDER_train_1924 | Show all the distinct institution types. | SELECT DISTINCT TYPE FROM institution | 1. SELECT[tbl:​Institution] <br>2. PROJECT[col:​Institution:​Type, #1] <br>3.*(distinct)* PROJECT[distinct #REF, #2] <br> | 1. SELECT[tbl:​Institution] <br>2. PROJECT[col:​Institution:​Type, #1] <br>3.*(distinct)* PROJECT[None, #2] <br> | + | easy | 
  | SPIDER_train_1925 | Show institution names along with the number of proteins for each institution. | SELECT T1.institution ,  count(*) FROM institution AS T1 JOIN protein AS T2 ON T1.institution_id  =  T2.institution_id GROUP BY T1.institution_id | 1. SELECT[col:​Institution:​Institution_id] <br>2. PROJECT[col:​Institution:​Institution, #1] <br>3. PROJECT[tbl:​protein, #1] <br>4. GROUP[count, #3, #1] <br>5. UNION[#2, #4] <br> | 1. SELECT[col:​Institution:​Institution_id] <br>2. PROJECT[col:​Institution:​Institution, #1] <br>3. PROJECT[tbl:​protein, #1] <br>4. GROUP[count, #3, #1] <br>5. UNION[#2, #4] <br> | + | medium | 
  | SPIDER_train_1927 | Show the protein name and the institution name. | SELECT T2.protein_name ,  T1.institution FROM institution AS T1 JOIN protein AS T2 ON T1.institution_id  =  T2.institution_id | 1. SELECT[tbl:​protein] <br>2. PROJECT[col:​protein:​protein_name, #1] <br>3. PROJECT[tbl:​Institution, #1] <br>4. PROJECT[col:​Institution:​Institution, #3] <br>5. UNION[#2, #4] <br> | 1. SELECT[tbl:​protein] <br>2. PROJECT[col:​protein:​protein_name, #1] <br>3. PROJECT[tbl:​Institution, #1] <br>4. PROJECT[col:​Institution:​Institution, #3] <br>5. UNION[#2, #4] <br> | + | medium | 
  | SPIDER_train_1928 | How many proteins are associated with an institution in a building with at least 20 floors? | SELECT count(*) FROM institution AS T1 JOIN protein AS T2 ON T1.institution_id  =  T2.institution_id JOIN building AS T3 ON T3.building_id  =  T1.building_id WHERE T3.floors  >=  20 | 1. SELECT[tbl:​Institution] <br>2. PROJECT[tbl:​building, #1] <br>3. PROJECT[col:​building:​Floors, #2] <br>4. GROUP[col:​building:​Floors, #3, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>=:​20:​col:​building:​Floors] <br>6. PROJECT[tbl:​protein, #5] <br>7. AGGREGATE[count, #6] <br> | 1. SELECT[tbl:​Institution] <br>2. PROJECT[tbl:​building, #1] <br>3. PROJECT[col:​building:​Floors, #2] <br>4. GROUP[sum, #3, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>=:​20:​col:​building:​Floors] <br>6. PROJECT[tbl:​protein, #5] <br>7. AGGREGATE[count, #6] <br> | + | hard | 
  | SPIDER_train_1929 | How many institutions do not have an associated protein in our record? | SELECT count(*) FROM institution WHERE institution_id NOT IN (SELECT institution_id FROM protein) | 1. SELECT[tbl:​Institution] <br>2. FILTER[#1, tbl:​protein] <br>3. DISCARD[#1, #2] <br>4. AGGREGATE[count, #3] <br> | 1. SELECT[tbl:​Institution] <br>2. COMPARATIVE[#1, #1, tbl:​protein] <br>3. DISCARD[#1, #2] <br>4. AGGREGATE[count, #3] <br> | + | extra | 
 ***
 Exec acc: **1.0000**
