 | Idx | Table      | Column | Primary Key | Foreign Key | 
 | ----------- | ----------- | ----------- | ----------- | ----------- | 
  | 0 |  | * |   |   | 
 | 1 | **School** | School_id | + |   | 
 | 2 |   | School_name |   |   | 
 | 3 |   | Location |   |   | 
 | 4 |   | Mascot |   |   | 
 | 5 |   | Enrollment |   |   | 
 | 6 |   | IHSAA_Class |   |   | 
 | 7 |   | IHSAA_Football_Class |   |   | 
 | 8 |   | County |   |   | 
 | 9 | **budget** | School_id | + | --> 1 | 
 | 10 |   | Year |   |   | 
 | 11 |   | Budgeted |   |   | 
 | 12 |   | total_budget_percent_budgeted |   |   | 
 | 13 |   | Invested |   |   | 
 | 14 |   | total_budget_percent_invested |   |   | 
 | 15 |   | Budget_invested_percent |   |   | 
 | 16 | **endowment** | endowment_id | + |   | 
 | 17 |   | School_id |   | --> 1 | 
 | 18 |   | donator_name |   |   | 
 | 19 |   | amount |   |   | 
 
  | Index | Question  | SQL | gold QDMR | pred QDMR | Exec | SQL hardness |
  | ----------- | ----------- | ----------- |  ----------- | ----------- | ----------- | ----------- | 
 | SPIDER_train_1884 | How many schools are there? | SELECT count(*) FROM school | 1. SELECT[tbl:​School] <br>2. AGGREGATE[count, #1] <br> | 1. SELECT[tbl:​School] <br>2. AGGREGATE[count, #1] <br> | + | easy | 
  | SPIDER_train_1886 | Show all school names in alphabetical order. | SELECT school_name FROM school ORDER BY school_name | 1. SELECT[col:​School:​School_name] <br>2. SORT[#1, #1, sortdir:​ascending] <br> | 1. SELECT[col:​School:​School_name] <br>2. SORT[#1, #1, sortdir:​ascending] <br> | + | easy | 
  | SPIDER_train_1887 | List the name, location, mascot for all schools. | SELECT school_name ,  LOCATION ,  mascot FROM school | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​School_name, #1] <br>3. PROJECT[col:​School:​Location, #1] <br>4. PROJECT[col:​School:​Mascot, #1] <br>5. UNION[#2, #3, #4] <br> | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​School_name, #1] <br>3. PROJECT[col:​School:​Location, #1] <br>4. PROJECT[col:​School:​Mascot, #1] <br>5. UNION[#2, #3, #4] <br> | + | medium | 
  | SPIDER_train_1888 | What are the total and average enrollment of all schools? | SELECT sum(enrollment) ,  avg(enrollment) FROM school | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. AGGREGATE[sum, #2] <br>4. AGGREGATE[avg, #2] <br>5. UNION[#3, #4] <br> | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. AGGREGATE[sum, #2] <br>4. AGGREGATE[avg, #2] <br>5. UNION[#3, #4] <br> | + | medium | 
  | SPIDER_train_1889 | What are the mascots for schools with enrollments above the average? | SELECT mascot FROM school WHERE enrollment  >  (SELECT avg(enrollment) FROM school) | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. AGGREGATE[avg, #2] <br>4. COMPARATIVE[#1, #2, comparative:​>:​#3] <br>5. PROJECT[col:​School:​Mascot, #4] <br> | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. AGGREGATE[avg, #2] <br>4. COMPARATIVE[#1, #1, comparative:​=:​#3] <br>5. PROJECT[col:​School:​Mascot, #4] <br> | - | hard | 
  | SPIDER_train_1890 | List the name of the school with the smallest enrollment. | SELECT school_name FROM school ORDER BY enrollment LIMIT 1 | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. SUPERLATIVE[comparative:​min:​None, #1, #2] <br>4. PROJECT[col:​School:​School_name, #3] <br> | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. SUPERLATIVE[comparative:​min:​None, #1, #2] <br>4. PROJECT[col:​School:​School_name, #3] <br> | + | medium | 
  | SPIDER_train_1891 | Show the average, maximum, minimum enrollment of all schools. | SELECT avg(enrollment) ,  max(enrollment) ,  min(enrollment) FROM school | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. AGGREGATE[avg, #2] <br>4. AGGREGATE[max, #2] <br>5. AGGREGATE[min, #2] <br>6. UNION[#3, #4, #5] <br> | 1. SELECT[tbl:​School] <br>2. PROJECT[col:​School:​Enrollment, #1] <br>3. AGGREGATE[avg, #2] <br>4. AGGREGATE[max, #2] <br>5. AGGREGATE[min, #2] <br>6. UNION[#3, #4, #5] <br> | + | medium | 
  | SPIDER_train_1892 | Show each county along with the number of schools and total enrollment in each county. | SELECT county ,  count(*) ,  sum(enrollment) FROM school GROUP BY county | 1. SELECT[col:​School:​County] <br>2. PROJECT[tbl:​School, #1] <br>3. GROUP[count, #2, #1] <br>4. PROJECT[col:​School:​Enrollment, #2] <br>5. GROUP[sum, #4, #1] <br>6. UNION[#1, #3, #5] <br> | 1. SELECT[col:​School:​County] <br>2. PROJECT[tbl:​School, #1] <br>3. GROUP[count, #2, #1] <br>4. PROJECT[col:​School:​Enrollment, #2] <br>5. GROUP[sum, #4, #1] <br>6. UNION[#1, #3, #5] <br> | + | medium | 
  | SPIDER_train_1893 | How many donors have endowment for school named "Glenn"? | SELECT count(DISTINCT T1.donator_name) FROM endowment AS T1 JOIN school AS T2 ON T1.school_id  =  T2.school_id WHERE T2.school_name  =  "Glenn" | 1. SELECT[col:​endowment:​donator_name] <br>2. PROJECT[tbl:​endowment, #1] <br>3. PROJECT[tbl:​School, #2] <br>4. COMPARATIVE[#1, #3, comparative:​=:​Glenn:​col:​School:​School_name] <br>5. AGGREGATE[count, #4] <br> | 1. SELECT[col:​endowment:​donator_name] <br>2. PROJECT[tbl:​endowment, #1] <br>3. PROJECT[tbl:​School, #2] <br>4. COMPARATIVE[#1, #3, comparative:​=:​Glenn:​col:​School:​School_name] <br>5. AGGREGATE[count, #4] <br> | + | medium | 
  | SPIDER_train_1895 | List the names of the schools without any endowment. | SELECT school_name FROM school WHERE school_id NOT IN (SELECT school_id FROM endowment) | 1. SELECT[tbl:​School] <br>2. FILTER[#1, tbl:​endowment] <br>3. DISCARD[#1, #2] <br>4. PROJECT[col:​School:​School_name, #3] <br> | 1. SELECT[tbl:​School] <br>2. COMPARATIVE[#1, #1, tbl:​endowment] <br>3. DISCARD[#1, #2] <br>4. PROJECT[col:​School:​School_name, #3] <br> | + | hard | 
  | SPIDER_train_1897 | Show the names of donors who donated to both school "Glenn" and "Triton." | SELECT T1.donator_name FROM endowment AS T1 JOIN school AS T2 ON T1.school_id  =  T2.school_id WHERE T2.school_name  =  'Glenn' INTERSECT SELECT T1.donator_name FROM endowment AS T1 JOIN school AS T2 ON T1.school_id  =  T2.school_id WHERE T2.school_name  =  'Triton' | 1. SELECT[tbl:​School] <br>2. FILTER[#1, comparative:​=:​Glenn:​col:​School:​School_name] <br>3. FILTER[#1, comparative:​=:​Triton:​col:​School:​School_name] <br>4. PROJECT[col:​endowment:​donator_name, #1] <br>5. INTERSECTION[#4, #3, #2] <br> | 1. SELECT[tbl:​School] <br>2. COMPARATIVE[#1, #1, comparative:​=:​Glenn:​col:​School:​School_name] <br>3. COMPARATIVE[#1, #1, comparative:​=:​Triton:​col:​School:​School_name] <br>4. PROJECT[col:​endowment:​donator_name, #1] <br>5. INTERSECTION[#4, #3, #2] <br> | + | extra | 
  | SPIDER_train_1899 | List the amount and donor name for the largest amount of donation. | SELECT amount ,  donator_name FROM endowment ORDER BY amount DESC LIMIT 1 | 1. SELECT[col:​endowment:​donator_name] <br>2. PROJECT[col:​endowment:​amount, #1] <br>3. SUPERLATIVE[comparative:​max:​None, #1, #2] <br>4. PROJECT[col:​endowment:​amount, #3] <br>5. PROJECT[col:​endowment:​donator_name, #3] <br>6. UNION[#4, #5] <br> | 1. SELECT[col:​endowment:​donator_name] <br>2. PROJECT[col:​endowment:​amount, #1] <br>3. SUPERLATIVE[comparative:​max:​None, #1, #2] <br>4. PROJECT[col:​endowment:​amount, #3] <br>5. PROJECT[col:​endowment:​donator_name, #3] <br>6. UNION[#4, #5] <br> | + | medium | 
  | SPIDER_train_1900 | How many budgets are above 3000 in year 2001 or before? | SELECT count(*) FROM budget WHERE budgeted  >  3000 AND YEAR  <=  2001 | 1. SELECT[tbl:​budget] <br>2. FILTER[#1, comparative:​<=:​2001:​col:​budget:​Year] <br>3. FILTER[#2, comparative:​>:​3000:​col:​budget:​Budgeted] <br>4. AGGREGATE[count, #3] <br> | 1. SELECT[tbl:​budget] <br>2. COMPARATIVE[#1, #1, comparative:​<=:​2001:​col:​budget:​Year] <br>3. COMPARATIVE[#2, #2, comparative:​>:​3000:​col:​budget:​Budgeted] <br>4. AGGREGATE[count, #3] <br> | + | medium | 
  | SPIDER_train_1901 | Count the number of budgets in year 2001 or before whose budgeted amount is greater than 3000 | SELECT count(*) FROM budget WHERE budgeted  >  3000 AND YEAR  <=  2001 | 1. SELECT[tbl:​budget] <br>2. PROJECT[col:​budget:​Year, #1] <br>3. PROJECT[tbl:​budget, #1] <br>4. COMPARATIVE[#1, #2, comparative:​<=:​2001:​col:​budget:​Year] <br>5. COMPARATIVE[#4, #3, comparative:​>:​3000:​col:​budget:​Budgeted] <br>6. AGGREGATE[count, #5] <br> | 1. SELECT[tbl:​budget] <br>2. PROJECT[col:​budget:​Year, #1] <br>3. PROJECT[tbl:​budget, #1] <br>4. COMPARATIVE[#1, #2, comparative:​<=:​2001:​col:​budget:​Year] <br>5. COMPARATIVE[#4, #3, comparative:​>:​3000:​col:​budget:​Budgeted] <br>6. AGGREGATE[count, #5] <br> | + | medium | 
  | SPIDER_train_1903 | Show all donor names. | SELECT DISTINCT donator_name FROM endowment | 1. SELECT[col:​endowment:​donator_name] <br>2. PROJECT[col:​endowment:​donator_name, #1] <br> | 1. SELECT[col:​endowment:​donator_name] <br>2. PROJECT[col:​endowment:​donator_name, #1] <br> | + | easy | 
  | SPIDER_train_1904 | How many budget record has a budget amount smaller than the invested amount? | SELECT count(*) FROM budget WHERE budgeted  <  invested | 1. SELECT[tbl:​budget] <br>2. PROJECT[col:​budget:​Budgeted, #1] <br>3. PROJECT[col:​budget:​Invested, #1] <br>4. COMPARATIVE[#1, #2, comparative:​<:​#3] <br>5. AGGREGATE[count, #4] <br> | 1. SELECT[tbl:​budget] <br>2. PROJECT[col:​budget:​Budgeted, #1] <br>3. PROJECT[col:​budget:​Invested, #1] <br>4. COMPARATIVE[#1, #1, comparative:​=:​#3] <br>5. AGGREGATE[count, #4] <br> | - | easy | 
  | SPIDER_train_1905 | What is the total budget amount for school "Glenn" in all years? | SELECT sum(T1.budgeted) FROM budget AS T1 JOIN school AS T2 ON T1.school_id  =  T2.school_id WHERE T2.school_name  =  'Glenn' | 1. SELECT[col:​budget:​Budgeted] <br>2. FILTER[#1, comparative:​=:​Glenn:​col:​School:​School_name] <br>3. AGGREGATE[sum, #2] <br> | 1. SELECT[col:​budget:​Budgeted] <br>2. COMPARATIVE[#1, #1, comparative:​=:​Glenn:​col:​School:​School_name] <br>3. AGGREGATE[sum, #2] <br> | + | medium | 
  | SPIDER_train_1907 | Find the names of schools that have more than one donator with donation amount above 8.5. | SELECT T2.School_name FROM endowment AS T1 JOIN school AS T2 ON T1.school_id  =  T2.school_id WHERE T1.amount  >  8.5 GROUP BY T1.school_id HAVING count(*)  >  1 | 1. SELECT[tbl:​School] <br>2. PROJECT[tbl:​endowment, #1] <br>3. PROJECT[col:​endowment:​amount, #2] <br>4. COMPARATIVE[#2, #3, comparative:​>:​8.5:​col:​endowment:​amount] <br>5. GROUP[count, #4, #1] <br>6. COMPARATIVE[#1, #5, comparative:​>:​1] <br>7. PROJECT[col:​School:​School_name, #6] <br> | 1. SELECT[tbl:​School] <br>2. PROJECT[tbl:​endowment, #1] <br>3. PROJECT[col:​endowment:​amount, #2] <br>4. COMPARATIVE[#2, #3, comparative:​>:​8.5:​col:​endowment:​amount] <br>5. GROUP[count, #4, #1] <br>6. COMPARATIVE[#1, #5, comparative:​>:​1] <br>7. PROJECT[col:​School:​School_name, #6] <br> | + | hard | 
  | SPIDER_train_1908 | Find the number of schools that have more than one donator whose donation amount is less than 8.5. | SELECT count(*) FROM (SELECT * FROM endowment WHERE amount  >  8.5 GROUP BY school_id HAVING count(*)  >  1) | 1. SELECT[col:​endowment:​School_id] <br>2. PROJECT[tbl:​endowment, #1] <br>3. PROJECT[donations of #REF, #2] <br>4. PROJECT[col:​endowment:​amount, #3] <br>5. COMPARATIVE[#2, #4, comparative:​>:​8.5:​col:​endowment:​amount] <br>6. GROUP[count, #5, #1] <br>7. COMPARATIVE[#1, #6, comparative:​>:​1] <br>8. AGGREGATE[count, #7] <br> | 1. SELECT[col:​endowment:​School_id] <br>2. PROJECT[tbl:​endowment, #1] <br>3. PROJECT[None, #2] <br>4. PROJECT[col:​endowment:​amount, #3] <br>5. COMPARATIVE[#2, #4, comparative:​>:​8.5:​col:​endowment:​amount] <br>6. GROUP[count, #5, #1] <br>7. COMPARATIVE[#1, #6, comparative:​>:​1] <br>8. AGGREGATE[count, #7] <br> | + | easy | 
 ***
 Exec acc: **0.8947**
