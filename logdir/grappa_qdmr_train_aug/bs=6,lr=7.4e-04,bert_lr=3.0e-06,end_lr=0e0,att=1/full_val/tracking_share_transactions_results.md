 | Idx | Table      | Column | Primary Key | Foreign Key | 
 | ----------- | ----------- | ----------- | ----------- | ----------- | 
  | 0 |  | * |   |   | 
 | 1 | **Investors** | investor_id | + |   | 
 | 2 |   | Investor_details |   |   | 
 | 3 | **Lots** | lot_id | + |   | 
 | 4 |   | investor_id |   | --> 1 | 
 | 5 |   | lot_details |   |   | 
 | 6 | **Ref_Transaction_Types** | transaction_type_code | + |   | 
 | 7 |   | transaction_type_description |   |   | 
 | 8 | **Transactions** | transaction_id | + |   | 
 | 9 |   | investor_id |   | --> 1 | 
 | 10 |   | transaction_type_code |   | --> 6 | 
 | 11 |   | date_of_transaction |   |   | 
 | 12 |   | amount_of_transaction |   |   | 
 | 13 |   | share_count |   |   | 
 | 14 |   | other_details |   |   | 
 | 15 | **Sales** | sales_transaction_id | + | --> 8 | 
 | 16 |   | sales_details |   |   | 
 | 17 | **Purchases** | purchase_transaction_id |   | --> 8 | 
 | 18 |   | purchase_details |   |   | 
 | 19 | **Transactions_Lots** | transaction_id |   | --> 8 | 
 | 20 |   | lot_id |   | --> 3 | 
 
  | Index | Question  | SQL | gold QDMR | pred QDMR | Exec | SQL hardness |
  | ----------- | ----------- | ----------- |  ----------- | ----------- | ----------- | ----------- | 
 | SPIDER_train_5844 | Find the number of investors in total. | SELECT count(*) FROM INVESTORS | 1. SELECT[tbl:​Investors] <br>2. AGGREGATE[count, #1] <br> | 1. SELECT[tbl:​Investors] <br>2. AGGREGATE[count, #1] <br> | + | easy | 
  | SPIDER_train_5845 | Show all investor details. | SELECT Investor_details FROM INVESTORS | 1. SELECT[tbl:​Investors] <br>2. PROJECT[col:​Investors:​Investor_details, #1] <br> | 1. SELECT[tbl:​Investors] <br>2. PROJECT[col:​Investors:​Investor_details, #1] <br> | + | easy | 
  | SPIDER_train_5846 | Show all distinct lot details. | SELECT DISTINCT lot_details FROM LOTS | 1. SELECT[col:​Lots:​lot_details] <br>2. PROJECT[distinct #REF, #1] <br>3. PROJECT[col:​Lots:​lot_details, #2] <br> | 1. SELECT[col:​Lots:​lot_details] <br>2. PROJECT[None, #1] <br>3. PROJECT[col:​Lots:​lot_details, #2] <br> | + | easy | 
  | SPIDER_train_5847 | Show the maximum amount of transaction. | SELECT max(amount_of_transaction) FROM TRANSACTIONS | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. AGGREGATE[max, #2] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. AGGREGATE[max, #2] <br> | + | easy | 
  | SPIDER_train_5848 | Show all date and share count of transactions. | SELECT date_of_transaction ,  share_count FROM TRANSACTIONS | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​date_of_transaction, #1] <br>3. PROJECT[col:​Transactions:​share_count, #1] <br>4. UNION[#2, #3] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​date_of_transaction, #1] <br>3. PROJECT[col:​Transactions:​share_count, #1] <br>4. UNION[#2, #3] <br> | + | medium | 
  | SPIDER_train_5850 | Show all transaction ids with transaction code 'PUR'. | SELECT transaction_id FROM TRANSACTIONS WHERE transaction_type_code  =  'PUR' | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​PUR:​col:​Transactions:​transaction_type_code] <br>4. PROJECT[col:​Transactions:​transaction_id, #3] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​PUR:​col:​Transactions:​transaction_type_code] <br>4. PROJECT[col:​Transactions:​transaction_id, #3] <br> | + | easy | 
  | SPIDER_train_5851 | Show all dates of transactions whose type code is "SALE". | SELECT date_of_transaction FROM TRANSACTIONS WHERE transaction_type_code  =  "SALE" | 1. SELECT[tbl:​Transactions] <br>2. FILTER[#1, comparative:​=:​SALE:​col:​Transactions:​transaction_type_code] <br>3. PROJECT[col:​Transactions:​date_of_transaction, #2] <br> | 1. SELECT[tbl:​Transactions] <br>2. COMPARATIVE[#1, #1, comparative:​=:​SALE:​col:​Transactions:​transaction_type_code] <br>3. PROJECT[col:​Transactions:​date_of_transaction, #2] <br> | + | easy | 
  | SPIDER_train_5852 | Show the average amount of transactions with type code "SALE". | SELECT avg(amount_of_transaction) FROM TRANSACTIONS WHERE transaction_type_code  =  "SALE" | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​transaction_type_code, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​SALE:​col:​Transactions:​transaction_type_code] <br>4. PROJECT[col:​Transactions:​amount_of_transaction, #3] <br>5. AGGREGATE[avg, #4] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​transaction_type_code, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​SALE:​col:​Transactions:​transaction_type_code] <br>4. PROJECT[col:​Transactions:​amount_of_transaction, #3] <br>5. AGGREGATE[avg, #4] <br> | + | easy | 
  | SPIDER_train_5853 | Show the description of transaction type with code "PUR". | SELECT transaction_type_description FROM Ref_Transaction_Types WHERE transaction_type_code	  =  "PUR" | 1. SELECT[tbl:​Ref_Transaction_Types] <br>2. PROJECT[col:​Ref_Transaction_Types:​transaction_type_code, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​PUR:​col:​Ref_Transaction_Types:​transaction_type_code] <br>4. PROJECT[col:​Ref_Transaction_Types:​transaction_type_description, #3] <br> | 1. SELECT[tbl:​Ref_Transaction_Types] <br>2. PROJECT[col:​Ref_Transaction_Types:​transaction_type_code, #1] <br>3. COMPARATIVE[#1, #2, comparative:​=:​PUR:​col:​Ref_Transaction_Types:​transaction_type_code] <br>4. PROJECT[col:​Ref_Transaction_Types:​transaction_type_description, #3] <br> | + | easy | 
  | SPIDER_train_5854 | Show the minimum amount of transactions whose type code is "PUR" and whose share count is bigger than 50. | SELECT min(amount_of_transaction) FROM TRANSACTIONS WHERE transaction_type_code  =  "PUR" AND share_count  >  50 | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>:​50:​col:​Transactions:​share_count] <br>4. FILTER[#3, comparative:​=:​PUR:​col:​Transactions:​transaction_type_code] <br>5. PROJECT[col:​Transactions:​amount_of_transaction, #4] <br>6. AGGREGATE[min, #5] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>:​50:​col:​Transactions:​share_count] <br>4. COMPARATIVE[#3, #3, comparative:​=:​PUR:​col:​Transactions:​transaction_type_code] <br>5. PROJECT[col:​Transactions:​amount_of_transaction, #4] <br>6. AGGREGATE[min, #5] <br> | + | medium | 
  | SPIDER_train_5855 | Show the maximum share count of transactions where the amount is smaller than 10000 | SELECT max(share_count) FROM TRANSACTIONS WHERE amount_of_transaction  <  10000 | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​<:​10000:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Transactions:​share_count, #3] <br>5. AGGREGATE[max, #4] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​<:​10000:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Transactions:​share_count, #3] <br>5. AGGREGATE[max, #4] <br> | + | easy | 
  | SPIDER_train_5856 | Show the dates of transactions if the share count is bigger than 100 or the amount is bigger than 1000. | SELECT date_of_transaction FROM TRANSACTIONS WHERE share_count  >  100 OR amount_of_transaction  >  1000 | 1. SELECT[col:​Transactions:​date_of_transaction] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>:​100:​col:​Transactions:​share_count] <br>4. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>:​1000:​col:​Transactions:​amount_of_transaction] <br>6. UNION[#3, #5] <br>7. PROJECT[col:​Transactions:​date_of_transaction, #6] <br> | 1. SELECT[col:​Transactions:​date_of_transaction] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>:​100:​col:​Transactions:​share_count] <br>4. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>:​1000:​col:​Transactions:​amount_of_transaction] <br>6. UNION[#3, #5] <br>7. PROJECT[col:​Transactions:​date_of_transaction, #6] <br> | + | medium | 
  | SPIDER_train_5857 | Show the transaction type descriptions and dates if the share count is smaller than 10. | SELECT T1.transaction_type_description ,  T2.date_of_transaction FROM Ref_Transaction_Types AS T1 JOIN TRANSACTIONS AS T2 ON T1.transaction_type_code  =  T2.transaction_type_code WHERE T2.share_count  <  10 | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​share_count, #1] <br>3. COMPARATIVE[#1, #2, comparative:​<:​10:​col:​Transactions:​share_count] <br>4. PROJECT[col:​Ref_Transaction_Types:​transaction_type_description, #3] <br>5. PROJECT[col:​Transactions:​date_of_transaction, #3] <br>6. UNION[#4, #5] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​share_count, #1] <br>3. COMPARATIVE[#1, #2, comparative:​<:​10:​col:​Transactions:​share_count] <br>4. PROJECT[col:​Ref_Transaction_Types:​transaction_type_description, #3] <br>5. PROJECT[col:​Transactions:​date_of_transaction, #3] <br>6. UNION[#4, #5] <br> | + | medium | 
  | SPIDER_train_5860 | Return the lot details and investor ids. | SELECT lot_details ,  investor_id FROM LOTS | 1. SELECT[tbl:​Lots] <br>2. PROJECT[col:​Lots:​lot_details, #1] <br>3. PROJECT[col:​Lots:​investor_id, #1] <br>4. PROJECT[col:​Lots:​investor_id, #3] <br>5. UNION[#2, #4] <br> | 1. SELECT[tbl:​Lots] <br>2. PROJECT[col:​Lots:​lot_details, #1] <br>3. PROJECT[col:​Lots:​investor_id, #1] <br>4. PROJECT[col:​Lots:​investor_id, #3] <br>5. UNION[#2, #4] <br> | + | medium | 
  | SPIDER_train_5861 | Return the lot details of lots that belong to investors with details "l"? | SELECT T2.lot_details FROM INVESTORS AS T1 JOIN LOTS AS T2 ON  T1.investor_id  =  T2.investor_id WHERE T1.Investor_details  =  "l" | 1. SELECT[tbl:​Investors] <br>2. FILTER[#1, comparative:​=:​l:​col:​Investors:​Investor_details] <br>3. PROJECT[tbl:​Lots, #2] <br>4. PROJECT[col:​Lots:​lot_details, #3] <br> | 1. SELECT[tbl:​Investors] <br>2. COMPARATIVE[#1, #1, comparative:​=:​l:​col:​Investors:​Investor_details] <br>3. PROJECT[tbl:​Lots, #2] <br>4. PROJECT[col:​Lots:​lot_details, #3] <br> | + | medium | 
  | SPIDER_train_5862 | What are the purchase details of transactions with amount bigger than 10000? | SELECT T1.purchase_details FROM PURCHASES AS T1 JOIN TRANSACTIONS AS T2 ON T1.purchase_transaction_id  =  T2.transaction_id WHERE T2.amount_of_transaction  >  10000 | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>:​10000:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Purchases:​purchase_details, #3] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>:​10000:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Purchases:​purchase_details, #3] <br> | + | medium | 
  | SPIDER_train_5863 | What are the sale details and dates of transactions with amount smaller than 3000? | SELECT T1.sales_details ,  T2.date_of_transaction FROM SALES AS T1 JOIN TRANSACTIONS AS T2 ON T1.sales_transaction_id  =  T2.transaction_id WHERE T2.amount_of_transaction  <  3000 | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​<:​3000:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Sales:​sales_details, #3] <br>5. PROJECT[col:​Transactions:​date_of_transaction, #3] <br>6. UNION[#4, #5] <br> | 1. SELECT[tbl:​Transactions] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​<:​3000:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Sales:​sales_details, #3] <br>5. PROJECT[col:​Transactions:​date_of_transaction, #3] <br>6. UNION[#4, #5] <br> | + | medium | 
  | SPIDER_train_5866 | Show the average transaction amount for different transaction types. | SELECT transaction_type_code ,  avg(amount_of_transaction) FROM TRANSACTIONS GROUP BY transaction_type_code | 1. SELECT[col:​Transactions:​transaction_type_code] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. GROUP[avg, #2, #1] <br>4. UNION[#1, #3] <br> | 1. SELECT[col:​Transactions:​transaction_type_code] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. GROUP[avg, #2, #1] <br>4. UNION[#1, #3] <br> | + | medium | 
  | SPIDER_train_5870 | Show the average amount of transactions for different investors. | SELECT investor_id ,  avg(amount_of_transaction) FROM TRANSACTIONS GROUP BY investor_id | 1. SELECT[col:​Transactions:​investor_id] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. PROJECT[col:​Transactions:​amount_of_transaction, #2] <br>4. GROUP[avg, #3, #1] <br>5. UNION[#1, #4] <br> | 1. SELECT[col:​Transactions:​investor_id] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. PROJECT[col:​Transactions:​amount_of_transaction, #2] <br>4. GROUP[avg, #3, #1] <br>5. UNION[#1, #4] <br> | + | medium | 
  | SPIDER_train_5871 | Show the average amount of transactions for different lots. | SELECT T2.lot_id ,  avg(amount_of_transaction) FROM TRANSACTIONS AS T1 JOIN Transactions_Lots AS T2 ON T1.transaction_id  =  T2.transaction_id GROUP BY T2.lot_id | 1.*(distinct)* SELECT[col:​Transactions_Lots:​lot_id] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. GROUP[avg, #2, #1] <br>4. UNION[#1, #3] <br> | 1.*(distinct)* SELECT[col:​Transactions_Lots:​lot_id] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. GROUP[avg, #2, #1] <br>4. UNION[#1, #3] <br> | + | medium | 
  | SPIDER_train_5874 | Show the number of transactions for different investors. | SELECT investor_id ,  COUNT(*) FROM TRANSACTIONS GROUP BY investor_id | 1. SELECT[col:​Transactions:​investor_id] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. UNION[#1, #3] <br> | 1. SELECT[col:​Transactions:​investor_id] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. UNION[#1, #3] <br> | + | medium | 
  | SPIDER_train_5876 | Show the transaction type code that occurs the most frequently. | SELECT transaction_type_code FROM TRANSACTIONS GROUP BY transaction_type_code ORDER BY COUNT(*) DESC LIMIT 1 | 1. SELECT[col:​Transactions:​transaction_type_code] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br> | 1. SELECT[col:​Transactions:​transaction_type_code] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br> | + | hard | 
  | SPIDER_train_5877 | Show the description of the transaction type that occurs most frequently. | SELECT T1.transaction_type_description FROM Ref_Transaction_Types AS T1 JOIN TRANSACTIONS AS T2 ON T1.transaction_type_code  =  T2.transaction_type_code GROUP BY T1.transaction_type_code ORDER BY COUNT(*) DESC LIMIT 1 | 1. SELECT[tbl:​Ref_Transaction_Types] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Ref_Transaction_Types:​transaction_type_description, #4] <br> | 1. SELECT[tbl:​Ref_Transaction_Types] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Ref_Transaction_Types:​transaction_type_description, #4] <br> | + | extra | 
  | SPIDER_train_5878 | Show the id and details of the investor that has the largest number of transactions. | SELECT T2.investor_id ,  T1.Investor_details FROM INVESTORS AS T1 JOIN TRANSACTIONS AS T2 ON T1.investor_id  =  T2.investor_id GROUP BY T2.investor_id ORDER BY COUNT(*) DESC LIMIT 1 | 1. SELECT[tbl:​Investors] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Transactions:​investor_id, #4] <br>6. PROJECT[col:​Investors:​Investor_details, #4] <br>7. UNION[#5, #6] <br> | 1. SELECT[tbl:​Investors] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. SUPERLATIVE[comparative:​max:​None, #1, #3] <br>5. PROJECT[col:​Transactions:​investor_id, #4] <br>6. PROJECT[col:​Investors:​Investor_details, #4] <br>7. UNION[#5, #6] <br> | + | extra | 
  | SPIDER_train_5880 | Show the ids of the investors who have at least two transactions. | SELECT T2.investor_id FROM INVESTORS AS T1 JOIN TRANSACTIONS AS T2 ON T1.investor_id  =  T2.investor_id GROUP BY T2.investor_id HAVING COUNT(*)  >=  2 | 1. SELECT[tbl:​Investors] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>=:​2] <br>5. PROJECT[col:​Transactions:​investor_id, #4] <br> | 1. SELECT[tbl:​Investors] <br>2. PROJECT[tbl:​Transactions, #1] <br>3. GROUP[count, #2, #1] <br>4. COMPARATIVE[#1, #3, comparative:​>=:​2] <br>5. PROJECT[col:​Transactions:​investor_id, #4] <br> | + | medium | 
  | SPIDER_train_5882 | What are the dates of transactions with at least 100 share count or amount bigger than 100? | SELECT date_of_transaction FROM TRANSACTIONS WHERE share_count  >=  100 OR amount_of_transaction  >=  100 | 1. SELECT[col:​Transactions:​date_of_transaction] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>=:​100:​col:​Transactions:​share_count] <br>4. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>=:​100:​col:​Transactions:​amount_of_transaction] <br>6. UNION[#3, #5] <br>7. PROJECT[col:​Transactions:​date_of_transaction, #6] <br> | 1. SELECT[col:​Transactions:​date_of_transaction] <br>2. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>3. COMPARATIVE[#1, #2, comparative:​>=:​100:​col:​Transactions:​amount_of_transaction] <br>4. PROJECT[col:​Transactions:​amount_of_transaction, #1] <br>5. COMPARATIVE[#1, #4, comparative:​>=:​100:​col:​Transactions:​amount_of_transaction] <br>6. UNION[#3, #5] <br>7. PROJECT[col:​Transactions:​date_of_transaction, #6] <br> | - | medium | 
  | SPIDER_train_5884 | What are the details of the lots which are not used in any transactions? | SELECT lot_details FROM Lots EXCEPT SELECT T1.lot_details FROM Lots AS T1 JOIN transactions_lots AS T2 ON T1.lot_id  =  T2.lot_id | 1. SELECT[tbl:​Transactions_Lots] <br>2. PROJECT[col:​Lots:​lot_details, #1] <br>3. SELECT[col:​Lots:​lot_details] <br>4. DISCARD[#3, #2] <br>5. PROJECT[col:​Lots:​lot_details, #4] <br> | 1. SELECT[tbl:​Transactions_Lots] <br>2. PROJECT[col:​Lots:​lot_details, #1] <br>3. SELECT[col:​Lots:​lot_details] <br>4. DISCARD[#3, #2] <br>5. PROJECT[col:​Lots:​lot_details, #4] <br> | + | hard | 
 ***
 Exec acc: **0.9630**
